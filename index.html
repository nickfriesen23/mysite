<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Nick Friesen - Photography, Portraits, and Creative Work">
    <title>It's Nick | Photography & More</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/home.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Additional styles for the single-page layout */
        section {
            scroll-margin-top: 80px;
        }
        .portfolio-container {
            margin-top: 2rem;
            padding: 0 1rem;
        }
        
        .portfolio-images {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        @media screen and (max-width: 768px) {
            .portfolio-images {
                display: block !important;
                width: 100% !important;
            }
            
            .portfolio-item {
                display: block !important;
                width: 100% !important;
                margin-bottom: 20px !important;
            }
            
            .portfolio-item img {
                width: 100% !important;
                height: auto !important;
                display: block !important;
                max-width: 100% !important;
                border-radius: 12px !important;
            }
        }
        
        .portfolio-item {
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .portfolio-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .portfolio-item img {
            width: 100%;
            height: auto;
            display: block;
            max-width: 100%;
            transition: transform 0.3s ease;
        }
        
        .portfolio-item img:hover {
            transform: scale(1.02);
        }

        /* Ensure images display in portrait/vertical mode */
        @media screen and (orientation: portrait) {
            .portfolio-grid {
                display: block;
            }
            
            .portfolio-item {
                display: block;
                width: 100%;
                height: auto;
                margin-bottom: 1.5rem;
            }
            
            .portfolio-item img {
                width: 100% !important;
                height: auto !important;
                display: block !important;
                max-width: 100% !important;
            }
        }
        
        .portfolio-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .portfolio-tab {
            padding: 0.5rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .portfolio-tab.active {
            background: var(--mustard);
            color: var(--dark-blue);
        }
        
        .see-more-container {
            margin-top: 2rem;
            text-align: center;
        }
        
        .model-card, .project-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .model-card:hover, .project-item:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 200, 87, 0.3);
        }
        
        .model-image-placeholder, .project-image-placeholder {
            height: 200px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
        }
        
        .model-content, .project-content {
            padding: 1.5rem;
        }
        
        .model-features {
            margin-top: 1rem;
        }
        
        .model-feature {
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            border-radius: 4px;
        }
        
        .project-link {
            display: inline-block;
            margin-top: 1rem;
            color: var(--mustard);
            text-decoration: none;
            font-weight: 500;
        }
        
        .calendar-container {
            margin-top: 2rem;
            text-align: center;
        }
        
        .calendar-embed {
            width: 100%;
            max-width: 800px;
            height: 600px;
            border: none;
            border-radius: 12px;
            margin: 0 auto;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="header-container">
            <a href="#hero" class="logo">It's Nick<span class="accent">.</span></a>
            <nav class="main-nav">
                <ul>
                    <li><a href="#photography">Photo</a></li>
                    <li><a href="#passions">Passions</a></li>
                    <li><a href="#events">Events</a></li>
                    <li><a href="#calendar">Book a Call</a></li>
                </ul>
            </nav>
            <button class="mobile-menu-toggle">Menu</button>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="hero">
        <div class="hero-content">
            <div class="hero-flex">
                <div class="title-group">
                    <h1>It's Nick<span class="accent">.</span></h1>
                    <div class="dynamic-text-container">
                        <div class="dynamic-text">
                            <div class="text-wrapper">
                                <span class="static-text">...and I'm into</span>
                                <span id="changing-text" class="accent">Photography</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="hero-image">
                    <img src="https://nick-f.imgix.net/images/nick-image.PNG" alt="Nick's headshot" class="profile-image" loading="eager">
                </div>
            </div>
            
            <!-- Quick Navigation -->
            <div class="quick-nav">
                <a href="#photography" class="quick-nav-item">
                    <span class="icon">üì∏</span>
                    <span>Photo</span>
                </a>
                <a href="#passions" class="quick-nav-item">
                    <span class="icon">‚ù§Ô∏è</span>
                    <span>Passions</span>
                </a>
                <a href="#events" class="quick-nav-item">
                    <span class="icon">üéµ</span>
                    <span>Events</span>
                </a>
                <a href="#calendar" class="quick-nav-item">
                    <span class="icon">üóìÔ∏è</span>
                    <span>Book a Call</span>
                </a>
            </div>
        </div>
        
        <!-- Decorative Elements -->
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
            <div class="shape shape-4"></div>
        </div>
    </section>

    <!-- Photography Section -->
    <section id="photography" class="section">
        <h2>Photo<span class="accent">.</span></h2>
        <p class="section-description">
            I specialize in photography that captures personality, connection, and authenticity.
            From professional headshots to content creation for businesses, I help you tell your story visually.
        </p>
        
        <!-- Single Photos button that toggles photo visibility -->
        <div style="text-align: center; margin-bottom: 30px;">
            <button id="toggle-photos-btn" class="cta-button">Show Photos</button>
        </div>
        
        <!-- No direct link needed anymore since we have the button -->
        
        <div id="photo-images" class="portfolio-container" style="display: none;">
            <!-- Simple direct image approach for better mobile compatibility -->
            <div class="portfolio-images" id="portfolio-grid" style="width: 100%;">
                <!-- Add preload links for critical images -->
                <link rel="preload" href="https://nick-f.imgix.net/images/new-headshots-9316.jpg?auto=format&w=1200" as="image">
                <link rel="preload" href="https://nick-f.imgix.net/images/austin-hendrickson-4489.jpg?auto=format&w=1200" as="image">
                <link rel="preload" href="https://nick-f.imgix.net/images/soccershoot-33.jpg?auto=format&w=1200" as="image">
                <!-- Initial 6 images with direct URLs -->
                <div class="portfolio-item visible" data-category="headshots">
                    <img src="https://nick-f.imgix.net/images/new-headshots-9316.jpg" alt="Professional headshot" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item visible" data-category="headshots">
                    <img src="https://nick-f.imgix.net/images/austin-hendrickson-4489.jpg" alt="Professional headshot" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item visible" data-category="dating">
                    <img src="https://nick-f.imgix.net/images/soccershoot-33.jpg" alt="Dating profile photo" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item visible" data-category="headshots">
                    <img src="https://nick-f.imgix.net/images/logan-tma-9575.jpg" alt="Professional headshot" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item visible" data-category="couples">
                    <img src="https://nick-f.imgix.net/images/2020-02-01_09-36-12_000.jpeg" alt="Couples photo" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item visible" data-category="dating">
                    <img src="https://nick-f.imgix.net/images/headshott-3151.jpg" alt="Dating profile photo" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                
                <!-- Hidden images (will be shown with "See More" button) -->
                <div class="portfolio-item hidden" data-category="headshots">
                    <img src="https://nick-f.imgix.net/images/new-headshots-tma-8198.jpg" alt="Professional headshot" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item hidden" data-category="headshots">
                    <img src="https://nick-f.imgix.net/images/rauhan-3747.jpg" alt="Professional headshot" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item hidden" data-category="headshots">
                    <img src="https://nick-f.imgix.net/images/ben-1393.jpg" alt="Professional headshot" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item hidden" data-category="headshots">
                    <img src="https://nick-f.imgix.net/images/aj-4314.jpg" alt="Professional headshot" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item hidden" data-category="headshots">
                    <img src="https://nick-f.imgix.net/images/new-headshots-0310.jpg" alt="Professional headshot" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
                <div class="portfolio-item hidden" data-category="headshots">
                    <img src="https://nick-f.imgix.net/images/ryan-2170.jpg" alt="Professional headshot" style="width:100%; height:auto; margin-bottom:20px; display:block; border-radius:12px;" loading="lazy">
                </div>
            </div>
        </div>
        
        <!-- Removed See More button since all photos will be shown/hidden together -->
    </section>


    <!-- Passions Section -->
    <section id="passions" class="section">
        <h2>Passions<span class="accent">.</span></h2>
        <p class="section-description">
            Beyond my professional work, I'm passionate about many things that keep me inspired and creative.
        </p>
        
        <div class="passions-grid cards">
            <div class="card">
                <h3>Music</h3>
                <p>I studied piano performance in college, but now my joy is generally just playing a little bit every day to relax. Piano, guitar, and a bit of DJing is something I'm really passionate about.</p>
            </div>
            <div class="card">
                <h3>Cooking</h3>
                <p>The easiest way I've found to not have to leave the house is by hosting for a meal. I've gotten pretty deep into cooking, baking, and smoking meats with my homemade smoker. My wife and I love doing events for the community once a month- each with a different theme.</p>
            </div>
            <div class="card">
                <h3>Machine Learning</h3>
                <p>Running a photography company, I've been diving into training and finetuning image models to create the most realistic clones of anyone. It's become one of my favorite new ways to keep creative.</p>
            </div>
        </div>
    </section>

    <!-- Events Section -->
    <section id="events" class="section">
        <h2>Events<span class="accent">.</span></h2>
        <p class="section-description">
            Catch our next event, "House (music) party at Friesens" where me and a few others will be DJing some music, and we hope everyone dances until late without the pressure of going to a club.
        </p>
        
        <div class="calendar-container">
            <iframe src="https://partiful.com/e/Pw4cMm09CRzFmJaF70p0" class="calendar-embed"></iframe>
        </div>
    </section>

    <!-- Calendar Section -->
    <section id="calendar" class="section">
        <h2>Book a Call<span class="accent">.</span></h2>
        <p class="section-description">
            Interested in working together? Schedule a call to discuss your project or just to chat.
        </p>
        
        <div class="calendar-container">
            <iframe src="https://calendar.notion.so/meet/nickfriesen/meet-with-nick" class="calendar-embed"></iframe>
        </div>
    </section>

    <!-- Footer -->
    <footer id="footer">
        <div class="footer-content">
            <div class="footer-left">
                <div class="footer-profile">
                    <img src="https://nick-f.imgix.net/images/nick-image.PNG" alt="Nick's headshot" class="footer-image" loading="lazy">
                    <h3>It's Nick. A little bit of everything.</h3>
                </div>
            </div>
            <div class="footer-right">
                <a href="#calendar" class="cta-button">Book a Call</a>
                <div class="social-links">
                    <a href="https://www.instagram.com/wanderinginatx/" class="social-link" target="_blank">Instagram @wanderinginatx</a>
                    <a href="mailto:nick@thematchartist.com" class="social-link">nick@thematchartist.com</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Function to handle image loading errors and provide fallbacks
        function setupImageErrorHandling() {
            document.querySelectorAll('img').forEach(img => {
                if (!img.hasAttribute('data-error-handled')) {
                    img.setAttribute('data-error-handled', 'true');
                    
                    // Store original src for potential recovery
                    const originalSrc = img.src;
                    
                    // Create a special mobile-friendly URL
                    let mobileFriendlyUrl = originalSrc;
                    if (originalSrc.includes('imgix.net')) {
                        // If URL already has parameters
                        if (originalSrc.includes('?')) {
                            // Replace all parameters with simple ones
                            mobileFriendlyUrl = originalSrc.split('?')[0] + '?auto=format&w=800';
                        } else {
                            // Add simple parameters
                            mobileFriendlyUrl = originalSrc + '?auto=format&w=800';
                        }
                    }
                    
                    // For mobile devices, use the mobile-friendly URL immediately
                    if ((window.innerWidth <= 768 || window.matchMedia("(orientation: portrait)").matches) &&
                        originalSrc.includes('imgix.net')) {
                        img.src = mobileFriendlyUrl;
                    }
                    
                    // Set up error handling
                    img.onerror = function() {
                        console.log("Error loading image:", this.src);
                        
                        // First try: use mobile-friendly URL if not already using it
                        if (this.src !== mobileFriendlyUrl && this.src.includes('imgix.net')) {
                            console.log("Trying mobile-friendly URL:", mobileFriendlyUrl);
                            this.src = mobileFriendlyUrl;
                            return;
                        }
                        
                        // Second try: remove all URL parameters
                        if (this.src.includes('?')) {
                            const baseSrc = this.src.split('?')[0];
                            console.log("Trying without parameters:", baseSrc);
                            this.src = baseSrc;
                            return;
                        }
                        
                        // Third try: use a direct image URL with minimal parameters
                        if (this.src.includes('imgix.net')) {
                            console.log("Trying with minimal parameters");
                            this.src = this.src + '?auto=format';
                            
                            // If that fails, we'll try a different approach
                            this.onerror = function() {
                                console.log("All attempts failed for:", originalSrc);
                                // At this point, we've tried everything - could add a placeholder image
                            };
                        }
                    };
                }
            });
        }
        
        // Run image error handling setup immediately
        setupImageErrorHandling();
        
        // Function to preload critical images
        function preloadCriticalImages() {
            // Use direct URLs without parameters
            const criticalImageUrls = [
                'https://nick-f.imgix.net/images/nick-image.PNG',
                'https://nick-f.imgix.net/images/new-headshots-9316.jpg',
                'https://nick-f.imgix.net/images/austin-hendrickson-4489.jpg'
            ];
            
            // Also preload the base URLs without parameters as fallbacks
            const fallbackUrls = [
                'https://nick-f.imgix.net/images/nick-image.PNG',
                'https://nick-f.imgix.net/images/new-headshots-9316.jpg',
                'https://nick-f.imgix.net/images/austin-hendrickson-4489.jpg'
            ];
            
            // Preload all URLs
            [...criticalImageUrls, ...fallbackUrls].forEach(url => {
                const img = new Image();
                img.src = url;
                
                // Add error handling
                img.onerror = function() {
                    console.log("Error preloading image:", this.src);
                    // If URL has parameters, try without them
                    if (this.src.includes('?')) {
                        this.src = this.src.split('?')[0];
                    }
                };
            });
        }
        
        // Preload critical images immediately
        preloadCriticalImages();
        
        document.addEventListener('DOMContentLoaded', () => {
            // Force photos to be visible on mobile
            // Enhanced mobile detection and image handling
            if (window.innerWidth <= 768 || window.matchMedia("(orientation: portrait)").matches) {
                console.log("Mobile device detected, ensuring photos are visible");
                
                // Function to ensure images are properly loaded
                const ensureImagesLoaded = () => {
                    document.querySelectorAll('.portfolio-item.visible').forEach(item => {
                        item.style.display = 'block';
                        const img = item.querySelector('img');
                        if (img) {
                            // Force image to be visible and properly sized
                            img.style.width = '100%';
                            img.style.height = 'auto';
                            img.style.display = 'block';
                            img.style.maxWidth = '100%';
                            img.style.marginBottom = '20px';
                            img.style.borderRadius = '12px';
                            
                            // Add enhanced error handling for images
                            if (!img.hasAttribute('data-mobile-handled')) {
                                img.setAttribute('data-mobile-handled', 'true');
                                
                                // Store original src
                                const originalSrc = img.src;
                                
                                // Check if image is already loaded
                                if (img.complete && img.naturalWidth === 0) {
                                    console.log("Image failed to load, trying fallback:", img.src);
                                    
                                    // Try with simpler parameters
                                    if (img.src.includes('?')) {
                                        const baseSrc = img.src.split('?')[0];
                                        img.src = baseSrc + '?auto=format';
                                        
                                        // If that fails, try without parameters
                                        img.onerror = function() {
                                            console.log("Still failed, trying without parameters");
                                            this.src = baseSrc;
                                            
                                            // Final fallback - force reload
                                            this.onerror = function() {
                                                console.log("Final attempt - force reload");
                                                setTimeout(() => {
                                                    this.src = originalSrc;
                                                }, 500);
                                            };
                                        };
                                    }
                                }
                            }
                        }
                    });
                    
                    // Make sure portfolio grid is visible
                    const portfolioGrid = document.getElementById('portfolio-grid');
                    if (portfolioGrid) {
                        portfolioGrid.style.display = 'block';
                        portfolioGrid.style.width = '100%';
                    }
                };
                
                // Run immediately and after delays to ensure images load
                ensureImagesLoaded();
                setTimeout(ensureImagesLoaded, 500);
                setTimeout(ensureImagesLoaded, 1500);
                setTimeout(ensureImagesLoaded, 3000);
            }
            
            // Array of interests to cycle through
            const interests = [
                'Photography.',
                'Piano.',
                'Guitar.',
                'Dance Music.',
                'DJing.',
                'interesting people.',
                'smoking meat.',
                'Machine Learning.',
                'Chopin.',
                'Sparkling Water.',
                'Jesus.',
                'facial expressions.',
                'the blues.',
                'warmly lit spaces.'
            ];

            const changingText = document.getElementById('changing-text');
            let lastIndex = -1;

            // Function to get random index different from last one
            function getRandomIndex() {
                let newIndex;
                do {
                    newIndex = Math.floor(Math.random() * interests.length);
                } while (newIndex === lastIndex && interests.length > 1);
                lastIndex = newIndex;
                return newIndex;
            }

            // Function to update text with fade effect
            function updateText() {
                changingText.style.opacity = '0';
                
                setTimeout(() => {
                    const index = getRandomIndex();
                    changingText.textContent = interests[index];
                    changingText.style.opacity = '1';
                }, 250); // Half of the interval for smooth transition
            }

            // Add transition style - faster for quicker words
            changingText.style.transition = 'opacity 0.25s ease-in-out';

            // Start the text rotation - 500ms interval
            setInterval(updateText, 500);

            // Add smooth scroll behavior for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    console.log("Clicked link to:", targetId);
                    const target = document.querySelector(targetId);
                    
                    if (target) {
                        // For mobile devices, use a different approach
                        if (window.innerWidth <= 768) {
                            // Simple scroll with a slight delay to ensure elements are rendered
                            setTimeout(() => {
                                window.scrollTo(0, target.offsetTop - 70);
                                
                                // If this is a link to the photo section, ensure photos are visible
                                if (targetId === '#photography' || targetId === '#photo-images') {
                                    console.log("Scrolled to photo section, ensuring photos are visible");
                                    
                                    // Force display of portfolio items with enhanced error handling
                                    document.querySelectorAll('.portfolio-item.visible').forEach(item => {
                                        item.style.display = 'block';
                                        const img = item.querySelector('img');
                                        if (img) {
                                            img.style.width = '100%';
                                            img.style.height = 'auto';
                                            img.style.display = 'block';
                                            img.style.maxWidth = '100%';
                                            img.style.marginBottom = '20px';
                                            
                                            // Add error handling for images
                                            if (!img.hasAttribute('data-error-handled')) {
                                                img.setAttribute('data-error-handled', 'true');
                                                img.onerror = function() {
                                                    console.log("Error loading image:", this.src);
                                                    // Try loading without parameters as fallback
                                                    if (this.src.includes('?')) {
                                                        this.src = this.src.split('?')[0];
                                                    }
                                                };
                                            }
                                            
                                            // Force image reload if needed
                                            if (img.complete && (img.naturalWidth === 0 || img.naturalHeight === 0)) {
                                                const currentSrc = img.src;
                                                img.src = '';
                                                setTimeout(() => { img.src = currentSrc; }, 10);
                                            }
                                        }
                                    });
                                }
                            }, 100);
                        } else {
                            // Smooth scroll for desktop
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    }
                });
            });

            // Photos toggle button functionality
            const togglePhotosBtn = document.getElementById('toggle-photos-btn');
            const photoContainer = document.getElementById('photo-images');
            const portfolioItems = document.querySelectorAll('.portfolio-item');
            
            // Initially hide all photos
            photoContainer.style.display = 'none';
            
            // Toggle photos visibility when button is clicked
            togglePhotosBtn.addEventListener('click', function() {
                const isVisible = photoContainer.style.display !== 'none';
                
                if (isVisible) {
                    // Hide photos
                    photoContainer.style.display = 'none';
                    this.textContent = 'Show Photos';
                } else {
                    // Show photos
                    photoContainer.style.display = 'block';
                    this.textContent = 'Hide Photos';
                    
                    // Make sure all portfolio items are visible
                    portfolioItems.forEach(item => {
                        item.style.display = 'block';
                        item.classList.remove('hidden');
                        item.classList.add('visible');
                        
                        // Ensure images are properly styled
                        const img = item.querySelector('img');
                        if (img) {
                            img.style.width = '100%';
                            img.style.height = 'auto';
                            img.style.display = 'block';
                            img.style.maxWidth = '100%';
                            img.style.marginBottom = '20px';
                            img.style.borderRadius = '12px';
                            
                            // Add error handling for images
                            if (!img.hasAttribute('data-error-handled')) {
                                img.setAttribute('data-error-handled', 'true');
                                img.onerror = function() {
                                    console.log("Error loading image:", this.src);
                                    // Try loading without parameters as fallback
                                    if (this.src.includes('?')) {
                                        this.src = this.src.split('?')[0];
                                    }
                                };
                            }
                        }
                    });
                    
                    // Scroll to the photos section
                    photoContainer.scrollIntoView({behavior: 'smooth'});
                }
            });
            
            // Run the enhanced image error handling setup
            setupImageErrorHandling();
            
            // Add a mutation observer to handle dynamically added images
            const observer = new MutationObserver(mutations => {
                mutations.forEach(mutation => {
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach(node => {
                            if (node.nodeName === 'IMG') {
                                setupImageErrorHandling();
                            } else if (node.querySelectorAll) {
                                const images = node.querySelectorAll('img');
                                if (images.length > 0) {
                                    setupImageErrorHandling();
                                }
                            }
                        });
                    }
                });
            });
            
            // Start observing the document
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });

            // Add intersection observer for section animations
            const sections = document.querySelectorAll('.section');
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const sectionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(20px)';
                section.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                sectionObserver.observe(section);
            });

            // Mobile menu toggle
            const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
            const mainNav = document.querySelector('.main-nav');
            
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', () => {
                    mainNav.classList.toggle('active');
                    mobileMenuToggle.classList.toggle('active');
                });
            }
        });
    </script>
</body>
</html>